#!/usr/bin/env bash

emacs_binary=$(type -p emacsclient) 2>/dev/null


if ! [[ $? -eq 0 ]]; then
  echo "There is no emacsclient binary in PATH." >&2
  exit 1
fi

# editor_cmd=(/usr/bin/emacsclient --create-frame --tty --socket-name=default)
# EDITOR="'""${editor_cmd[@]}""'" "${editor_cmd[@]}" "$@"

options=()
if ! [[ "${TERM}" =~ "eterm" ]]; then
    # we want a new frame on this tty if we're not within emacs
    # already.
    options+=(--tty)
fi

${emacs_binary} --socket-name=default "${options[@]}" "$@"
